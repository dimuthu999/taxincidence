---
title: "Anchoring in Housing Market: Evidence from California Proposition 13"
author: "Dimuthu Ratnadiwakara and Vijay Yerramilli"
date: "April, 2017"
output:
  html_document:
    css: bodycss.css
    fig_height: 6
    fig_width: 12
    number_section: yes
    toc: yes
  pdf_document:
    toc: yes
  word_document:
    toc: yes
linestretch: 2
bibliography: C:\Users\dnratnadiwakara\OneDrive\library.bib
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(warning=FALSE, message=FALSE,echo = FALSE)
```

@Tversky1974 first demonstrated anchoring using an experiment where they asked participants to estimate a number such as the percentage of African countries that are members of United Nations. The experiment began with the subjects being given a number (between 1 and 100) generated by the spin of a wheel. It turned out that the subjects showed a bias in their final estimates toward the number they were originally given. People make estimates by starting from an initial value that is adjusted to yield the final answer. These adjustements are typically insufficient. i.e. different starting points yield different estimates, which are biased toward the initial values. 8x7x6x...x1 = 2250; 1x2x...x8 = 512.

Much of the research on decision bias is based upon individuals making decisions under the controlled and degraded or informationally impoverished conditions of the laboratory (@Tversky1974,@Northcraft1987,@Black1996). Anchoring seems especially relevant to a bargaining setting such as the purchase of residential real estate, where (1) the fair market value of the property is not objectively determinable and (2) a bidding process is used to arrive at the property's actual selling price. The first value of the bidding process-the seller's asking price-might serve as an anchor. 

@Northcraft1987 experimental study based on one property in Tucson, Arizona. Amateur (48 students) and expert (21 real estate agents) subjects recived same 10 page packet of information except for the listing price. Four listing prices, low, moderately low, moderately high, high. After receiving the packet, subjects were allowed to examine the house, surrounding properyt and neighborhood for 20 mins. Conclusion: estimates of both subject populations were significantly biased by listing prices. 

@Black1996's analysis of data gathered through a series of experiments revealed that the manipulation of asking price led to the manipulation of both buyer opening offer and eventual settlement prices, thus indicating the use of asking price as a shortcut and its strong potential as an agent for bias.

It has been argued that decisional biases also may disapper once decision makers are placed in the information-rich context in which actual decisions are made. So transaction based studies are important.

@Genesove2001 (Sales price ~ loss + Residual from last sale price) and @Bokhari2011 (Sales price ~ (Listed Price - Estimated Value) + Residual from last sale price). But endogeneity is a concern.

# Endogeneity Concerns

* Unobservable house characteristics impact the listing price and the selling price. A number of housing and neighborhood features are unobserved by the econometrician.
* Seller characteristics that impact listing price may also impact the selling price.

If the seller is impatient, it is more likely the house is listed below market value which results in a lower transaction price (@Yavas1995). Similarly a seller who can wait for a high-paying buyer may post a high asking price to attract only those buyers that would value his or her property higher than the going market value. This is clearly a different behavior than anchoring, which would say that any asking price influences the valuation of all buyers.

Another type of signaling behavior in the seller’s asking price that would be rational and not inconsistent with classical economic theory would be for the seller to use his asking price to signal private information that she or he has about the (true market) value of the property. Properties are unique, and no one knows the property as well as its current owner. It is not possible to distinguish between “irrational” psychologically based anchoring behavior versus “rational” signaling behavior such as that described above. (@Bokhari2011)

While @Genesove2001 and @Bokhari2011 attempt to address the endogeneity due to unobservable house characateristics by using the residual of the purchased price regression, the seller related factors can still bias the estimate.

The direction of the bias is unclear. While unobservable house characteristics bias the estimate upwards, the motiviation of the seller biases the estimate downwards. 


Lock-in effect on housing choice because of the implicit tax break enjoyed by homeowners living in the same house for a long time (@ferreira2010). Higher opportunity cost so older people may be reluctant to sell. [how does this effect the estimate?]

I find that anchoring effect estimates are significantly downward biased when not accounted for the price endogeneity.


# Identification Strategy

 

Listing price becomes a less credible estimate of the market value when the liquidity is higher.

List Price ~ Property Tax (First Stage)
Sales Price ~ Property Tax
Sales Price ~ Property Tax (split by liquidity)

```{r init}

rm(list=ls())
path = "E:/tax_incident/"
setwd(path)
library(plyr)
library(psych)
library(stargazer)
library(Matching)
library(sandwich)
library(ggplot2)
library(scales)
library(lubridate)
library(zoo)
library(AER)
library(lfe)
library(pracma)
library(dplyr)
library(ggmap)

output.type="text"

completeFun <- function(data, desiredCols) {
  completeVec <- complete.cases(data[, desiredCols])
  return(data[completeVec, ])
}

sold_data <- readRDS(file="ca_anchoring_4.rds")
sold_data <- sold_data[sold_data$state %in% c("IL","CA"),]
sold_data['tax_pct'] <- sold_data$proptax_2015/sold_data$current_value
sold_data <- sold_data[sold_data$tax_pct>=quantile(sold_data$tax_pct,0.01,na.rm = TRUE) & sold_data$tax_pct<=quantile(sold_data$tax_pct,0.99,na.rm = TRUE),]
sold_data <- sold_data[sold_data$sales_price>=quantile(sold_data$sales_price,0.01,na.rm = TRUE) & sold_data$sales_price<=quantile(sold_data$sales_price,0.99,na.rm = TRUE),]
sold_data['delete'] <- ifelse(sold_data$Lastremodelyear>sold_data$purchased_year,1,0)
sold_data <- sold_data[sold_data$delete ==0 | is.na(sold_data$delete),]
sold_data$delete <- NULL
sold_data <- sold_data[is.finite(log(sold_data$listing_amount)),]
sold_data <- sold_data[is.finite(log(sold_data$current_value)),]
sold_data <- sold_data[is.finite(log(sold_data$sales_price)),]
sold_data <- sold_data[!is.na(sold_data$zip_purchased_year),]
sold_data <- sold_data[!is.na(sold_data$zip_listed_year),]

sold_data <- completeFun(sold_data,c("sales_price","beds","baths","sqft","age","zip_listed_year","walk_score","avg_school_rating","avg_school_distance","Lot"))

sales_price_estimate <- lm(sales_price~beds+baths+age+walk_score+Lot+avg_school_rating+avg_school_distance+listed_hpi+factor(zip_listed_year),data=sold_data)
sold_data['estimated_value'] <- predict(sales_price_estimate)
```

# California Proposition 13
Proposition 13, which is officially called the People's Initiative to Limit Property Taxation, was enacted in 1978 and it limits the maximum amount of tax on real property to be 1% and annual increase in the assesment value to 2%. A reassesment of the property is allowed only following an ownership change or new construction[@Oakland1979]. This leads to a situation where two similar houses in the same community whose residents have access to the same bundle of local public services paying significantly different tax amounts. The residents in the house that was purchased when the house prices are higher gets a larger tax bill compared to the residents in a similar house in the same community which was purchased way back when the house prices were low. 

According to the California Constitution, Article XIIIa, Proposition
13 states that “the maximum amount of any ad valorem tax on real property shall not exceed one percent (1%) of the full cash value of such property”. Full cash value means price at the time of purchase plus a maximum inflation adjustment of 2% per year. No re- assessment could be carried out, implying that property taxes are effectively frozen (apart from the 2% per year rise). Also, the initial base values used to set property taxes were the assessed housing values of 1975/1976

# Empirical Strategy
California,where Proposition 13,passed in 1978, created unusually wide variation in property tax ratess, with a uniform 1% fixed rate, based on prices at the time of purchase. As a result two similar houses in the same area would have different property tax bills depending on the house prices at the time of purchases. The difference in the property tax is not related to the unobservable house or seller characteristics. I use the exogenous property tax component as in instrument variable for the listing price. The intuition of the instrumental variable is that the difference in property tax is not endogenously determined as the housing price component, and therefore is uncorrelated with characteristics of the house or neighborhood.

For the sellers the property tax paid is a "sunk cost" and according to traditional microeconomic theory, sunk costs should not influence the seller's listing price. However, evidence from behavioral economics (Knox and Inkster (1968), Staw and Fox (1976),Arkes and Blumer (1985), Whyte (1986)) suggest that sunk costs do, in fact, influence people's decisions because humans are prone to loss aversion and framing effects ((Kahneman and Tverksy 1979, Tversky and Kahneman 1991). 

I argue that the sellers are more likely to list the houses for a higher price if they have paid a higher amount as property tax in the last several years.

The figure below shows an example of two houses in Anaheim California which were sold recently. Both these houses were sold for similar amounts in January 2016 and December 2015. Both houses have 3 bedrooms and 2 path rooms and both were built in 1955. These two houses are very close to each other as shown in the map and therefore we can assume they have access to the same bundle of local public services. 

![Figure 1: Two recently sold houses in Anaheim, CA](C:/Users/dnratnadiwakara/OneDrive/taxincidence/ex1.png)

Figure 2 shows that eventhough these two houses are very similar to each other, prior to recent sale, the property tax bills were significantly different. House 2 (2516 W Merle Pl) was never sold in the past and therefore it is subject to the maximum of 2% appreciation of assesment value even when the house prices were increasing at significantly higher rates.  House 1 (809 S Velare St), on the other hand, was sold for 550,000 in 2005 and 282,000 in 2009 which reset the assesment value of the house according to the proposisiotn 13.  We can see that property tax bill for house 1 is significantly higher following the sale in 2005 and it was significantly reduced (but still higher than house 2) following the sale in 2009 for a low amount. 

![Figure 2: Property taxes paid](C:/Users/dnratnadiwakara/OneDrive/taxincidence/fig1.png)


```{r}
temp <- sold_data[sold_data$state=="CA",]
temp['purchased_year_cat'] <- ifelse(temp$purchased_year<=1998,"1995-1998",                                  ifelse(temp$purchased_year<=2002,"1999-2002",ifelse(temp$purchased_year<=2006,"2003-2006",ifelse(temp$purchased_year<=2010,"2007-2010","2011-2012"))))
temp <- ddply(temp,.(purchased_year),summarise,proptax_2015 = mean(proptax_2015),current_value=mean(current_value),taxpct = proptax_2015*100/current_value,taxpct_2010 = mean(proptax_2015_2010*100/(current_value)),hpi=mean(purchased_hpi,na.rm=TRUE))
# stargazer((temp),summary = FALSE,type=output.type)
temp <- temp[,c("tax_pct","hpi")]

# temp <- sold_data[sold_data$state=="IL",]
# temp['purchased_year_cat'] <- ifelse(temp$purchased_year<=1998,"1995-1998",                                  ifelse(temp$purchased_year<=2002,"1999-2002",ifelse(temp$purchased_year<=2006,"2003-2006",ifelse(temp$purchased_year<=2010,"2007-2010","2011-2012"))))
# temp <- ddply(temp,.(purchased_year),summarise,proptax_2015 = mean(proptax_2015),current_value=mean(current_value),taxpct = proptax_2015*100/current_value,taxpct_2010 = mean(proptax_2015_2010*100/(current_value)),hpi=mean(purchased_hpi,na.rm=TRUE))
# stargazer((temp),summary = FALSE,type=output.type)
# temp <- NULL
```

Nevada(?)


While homeowners who had moved in the previous year paid an effective tax rate of 0.8% on average, households living in the same dwelling for more than a decade paid less than 0.44%.


Alternative Explanation: elderly households pay less property tax than younger house- holds, because of differences in tenure by age and these houses are poorly maintained. to rule out use the recently puchased houses.

In comparing current taxes with a counterfactual 1% of housing values as property taxes, t


# Results

## First Stage

Do households in California respond to the property tax variation
generated by Proposition 13? We are interested in the answer to this questionfor two reasons. First, itwill indicatewhetherornot this type of transaction cost has enough relevance to be included in a residential location decisionsmodel. Second, property taxes can only be used as an instrumental variable to solve the price endogeneity problemif both the tax benefit due to Proposition 13 is large and homeowners indeed respond to that variation in property taxes.

## Main Result

OLS estimates generate a relatively small user cost coefficient, indicating very high preferences for certain housing characteristics.

R2 of first stage is low. This suggests that listing price is not fully rational. 

```{r main_result}

dependent_var = "log(sales_price)"
endo_var = "log(listing_amount)"
instrument = "tax_pct+log(purchased_amount)+purchased_hpi"
controls = "log(current_value)|zip_listed_year+zip_purchased_year"
cluster_var = "zip_purchased_year"
controls2 = "listed_hpi+ownership_years+avg_school_rating+walk_score+Lot+baths+beds+age|zip_listed_year"

controls <- list()
controls[[1]] <- "0|zip_listed_year+zip_purchased_year"
controls[[2]] <- "log(current_value)|zip_listed_year+zip_purchased_year"
controls[[3]] <- "log(estimated_value)|zip_listed_year+zip_purchased_year"
controls[[4]] <- "listed_hpi+ownership_years+avg_school_rating+walk_score+Lot+baths+beds+age|zip_listed_year"

ols_formula <- as.formula(paste(dependent_var,"~",endo_var,"+",controls[[2]],"|0|",cluster_var,sep=""))
fs_formula <- as.formula(paste(endo_var,"~tax_pct+log(purchased_amount)+purchased_hpi+",controls[[2]],"|0|",cluster_var,sep=""))
ss_formula <- as.formula(paste(dependent_var,"~",controls,"|(",endo_var,"~",instrument,")|",cluster_var,sep=""))
ss_formula2 <- as.formula(paste(dependent_var,"~",controls2,"|(",endo_var,"~",instrument,")|",cluster_var,sep=""))

main_result <- list()
main_result[[1]] <- felm(ols_formula,data =sold_data)
main_result[[2]] <- felm(fs_formula,data =sold_data )
main_result[[3]]  <- felm(as.formula(paste(dependent_var,"~",controls[[1]],"|(",endo_var,"~",instrument,")|",cluster_var,sep="")),data = sold_data)
main_result[[4]]  <- felm(as.formula(paste(dependent_var,"~",controls[[2]],"|(",endo_var,"~",instrument,")|",cluster_var,sep="")),data = sold_data)
main_result[[5]]  <- felm(as.formula(paste(dependent_var,"~",controls[[3]],"|(",endo_var,"~",instrument,")",sep="")),data = sold_data)
main_result[[6]]  <- felm(as.formula(paste(dependent_var,"~",controls[[4]],"|(",endo_var,"~",instrument,")|",cluster_var,sep="")),data = sold_data)

stargazer(main_result,type=output.type,dep.var.labels.include = FALSE,column.labels = c("OLS","First Stage","IV","IV"),no.space = TRUE,omit.stat = c("f","rsq","ser"))

condfstat(main_result[[3]])
condfstat(main_result[[4]])
condfstat(main_result[[5]])
condfstat(main_result[[6]])
```

